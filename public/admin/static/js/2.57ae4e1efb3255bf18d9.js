webpackJsonp([2],{"+HuI":function(e,t){},"h9i+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("4YfN"),s=r.n(n),a=r("lC5x"),i=r.n(a),o=r("J0Oq"),c=r.n(o),u=r("dKdo"),f=r("L9X6"),l=r("vTZ+"),d={data:function(){return{forminfo:{title:"",begintime:"",endtime:"",first_cateid:"",second_cateid:"",goodsid:"",status:1},rules:{title:[{required:!0,message:"活动名称必须写",trigger:"blur"}],first_cateid:[{required:!0,message:"一级分类必须",trigger:"blur"}],second_cateid:[{required:!0,message:"二级分类必须",trigger:"blur"}],goodsid:[{required:!0,message:"请选择商品",trigger:"blur"}]},toplist:[],secondlist:[],goodslist:[],time:"",pickerOptions:{shortcuts:[{text:"1天内",onClick:function(e){var t=new Date,r=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",[r,t])}},{text:"3天内",onClick:function(e){var t=new Date,r=new Date;t.setTime(t.getTime()+2592e5),e.$emit("pick",[r,t])}},{text:"1周内",onClick:function(e){var t=new Date,r=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",[r,t])}}]}}},created:function(){this.getlist(),this.$route.params.id&&this.getinfo(this.$route.params.id)},methods:{getlist:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.d)();case 2:e.toplist=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},getinfo:function(e){var t=this;return c()(i.a.mark(function r(){var n,a;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l.d)(e);case 2:t.forminfo=r.sent,n=new Date(1*t.forminfo.begintime),a=new Date(1*t.forminfo.endtime),t.time=[n,a],t.topChange(t.forminfo.first_cateid),t.secondChange(t.forminfo.second_cateid),s()({},t.forminfo);case 9:case"end":return r.stop()}},r,t)}))()},submit:function(){var e,t=this;this.$refs.forminfo.validate((e=c()(i.a.mark(function e(r){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=17;break}if(t.forminfo.begintime=t.time[0].getTime(),t.forminfo.endtime=t.time[1].getTime(),n=void 0,!t.$route.params.id){e.next=11;break}return t.forminfo.id=t.$route.params.id,e.next=8,Object(l.c)(t.forminfo);case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,Object(l.a)(t.forminfo);case 13:n=e.sent;case 14:n&&t.$router.back(),e.next=18;break;case 17:t.$message.warn("验证不通过");case 18:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},reset:function(){this.$route.params.id?this.getinfo(this.$route.params.id):(this.$refs.forminfo.resetFields(),this.time="")},topChange:function(e){var t=this;return c()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=6;break}return r.next=3,Object(u.e)(e);case 3:t.secondlist=r.sent,r.next=7;break;case 6:t.secondlist=[];case 7:case"end":return r.stop()}},r,t)}))()},secondChange:function(e){var t=this;return c()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=6;break}return r.next=3,Object(f.d)(t.forminfo.first_cateid,e);case 3:t.goodslist=r.sent,r.next=7;break;case 6:t.goodslist=[];case 7:case"end":return r.stop()}},r,t)}))()}},components:{}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"bgf"},[r("el-col",{attrs:{span:12,offset:5}},[r("el-form",{ref:"forminfo",attrs:{"label-width":"100px",model:e.forminfo,rules:e.rules}},[r("el-form-item",{attrs:{label:"活动名称",prop:"title"}},[r("el-input",{model:{value:e.forminfo.title,callback:function(t){e.$set(e.forminfo,"title",t)},expression:"forminfo.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动时间"}},[r("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"一级分类",prop:"first_cateid"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.topChange},model:{value:e.forminfo.first_cateid,callback:function(t){e.$set(e.forminfo,"first_cateid",t)},expression:"forminfo.first_cateid"}},[r("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.toplist,function(e){return r("el-option",{key:e.id,attrs:{label:e.catename,value:e.id}})})],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"二级分类",prop:"first_cateid"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.secondChange},model:{value:e.forminfo.second_cateid,callback:function(t){e.$set(e.forminfo,"second_cateid",t)},expression:"forminfo.second_cateid"}},[r("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.secondlist,function(e){return r("el-option",{key:e.id,attrs:{label:e.catename,value:e.id}})})],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"选择商品",prop:"goodsid"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.forminfo.goodsid,callback:function(t){e.$set(e.forminfo,"goodsid",t)},expression:"forminfo.goodsid"}},[r("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.goodslist,function(e){return r("el-option",{key:e.id,attrs:{label:e.goodsname,value:e.id}})})],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-radio",{attrs:{label:1},model:{value:e.forminfo.status,callback:function(t){e.$set(e.forminfo,"status",t)},expression:"forminfo.status"}},[e._v("正常")]),e._v(" "),r("el-radio",{attrs:{label:0},model:{value:e.forminfo.status,callback:function(t){e.$set(e.forminfo,"status",t)},expression:"forminfo.status"}},[e._v("禁用")])],1),e._v(" "),r("el-form-item",[e.$route.params.id?r("el-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("立即修改")]):r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即添加")]),e._v(" "),r("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var p=r("C7Lr")(d,m,!1,function(e){r("+HuI")},"data-v-f47c5c70",null);t.default=p.exports},"vTZ+":function(e,t,r){"use strict";r.d(t,"d",function(){return p}),r.d(t,"a",function(){return b}),r.d(t,"c",function(){return v}),r.d(t,"b",function(){return g});var n,s,a,i,o=r("lC5x"),c=r.n(o),u=r("J0Oq"),f=r.n(u),l=r("pP4B"),d=r("I29D"),m=(r.n(d),r("bQIR")),p=(r.n(m),n=f()(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,!t){e.next=7;break}return e.next=4,l.a.get("/seckinfo",{params:{id:t}});case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,l.a.get("/secklist");case 9:r=e.sent;case 10:return e.abrupt("return",r.list);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),b=(s=f()(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/seckadd",t);case 2:return r=e.sent,m.Message.success(r.msg),e.abrupt("return",!0);case 5:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)}),v=(a=f()(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/seckedit",t);case 2:return r=e.sent,m.Message.success(r.msg),e.abrupt("return",!0);case 5:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),g=(i=f()(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return m.Message.warning("请传入删除id"),e.abrupt("return");case 3:return e.next=5,l.a.post("/seckdelete",{id:t});case 5:return r=e.sent,m.Message.success(r.msg),e.abrupt("return",r.list);case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}});
//# sourceMappingURL=2.57ae4e1efb3255bf18d9.js.map